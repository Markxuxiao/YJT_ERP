<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="renderer" content="webkit">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1">
        <meta name="description" content="万维软件新界面">

        <title>Anywell - 万维软件</title>
        <!-- commen css -->
        <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="assets/css/core.css" rel="stylesheet" type="text/css" />
        <link href="assets/css/components.css" rel="stylesheet" type="text/css"/>
        <link href="assets/css/icons.css" rel="stylesheet" type="text/css" />
        <link href="assets/css/pages.css" rel="stylesheet" type="text/css" />
        <link href="assets/css/responsive.css" rel="stylesheet" type="text/css" />


        <!-- HTML5 Shiv and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="assets/js/modernizr.min.js"></script>
        <!-- page css -->
        <style>
            /*offences-box-3*/
            .offences-box-3 .wftl h6,.offences-box-3 .cljg h6{
                color: red;
                font-size: 14px;
                padding-bottom: 5px;
                line-height: 1;
                font-weight: 800;
                border-bottom: 1px solid red;
            }

            .offences-box-3 .fk-item{
                text-align: center;
            }
            .offences-box-3 .fk-item .first{
                margin-bottom: 0;
                font-size: 24px;
            }
            /*offences-box-3 end*/
           
        </style>
    </head>


    <body class="masonryOnScroll-layout">

        <!-- Start content -->
        <div class="content">
            <div class="container">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="card-box">
                            <div class="row">
                                <div class="col-xs-5 col-md-9">
                                    <form class="form-inline" role="form">
                                        <div class="form-group" style="margin-top: 7px;margin-bottom: 0;">
                                            <div class="checkbox checkbox-primary m-l-0" style="display: inline-block;margin-top: 0;margin-bottom: 0;">
                                                <input id="checkboxall" type="checkbox">
                                                <label for="checkboxall">全选</label>
                                            </div>
                                            <a id="checked_remove" href="javascrpt:;" class="m-l-5" style="vertical-align: bottom;">删除</a>
                                        </div>

                                        
                                    </form>
                                </div>

                                <div class="col-xs-7 col-md-3">
                                    <form role="form">
                                        <div class="">
                                            <div class="input-group">
                                                <input type="text" id="example-input1-group2" name="example-input1-group2" class="form-control" placeholder="搜索">
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn waves-effect btn-white"><i class="fa fa-search"></i></button>
                                                    <div class="btn-group">
                                                      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" role="button">
                                                        <i class="fa fa-navicon"></i>
                                                      </button>
                                                      <ul class="dropdown-menu dropdown-menu-right">
                                                        <li><a href="#">我的桌面</a></li>
                                                        <li><a href="#" class="refresh">刷新</a></li>
                                                        <li><a href="#">其他</a></li>
                                                      </ul>
                                                    </div>
                                                </span>
                                            </div>
                                        </div>
                                    </form>
                                    
                                </div> 
                            </div>

                        </div>
                    </div>
                </div> <!-- end row -->
                
                <div id="masonry" class="row table-list">
                    
                </div><!-- end row -->

            </div> <!-- container -->

        </div> <!-- content -->

        <!-- 不用前端渲染可删除 -->
        <script id="template_item" type="text/html">
            {{each list as value i}}
                <div class="item col-xs-12 col-sm-6 col-md-6 col-lg-4">
                    <div class="card-box">
                        <div class="card-box-head">
                            <img src="./assets/images/index/1 (6).png" alt="" width="40" height="40" style="position: absolute;">
                            <div class="member-info" style="margin-left: 50px;">
                                <h4 class="m-t-0 m-b-5 header-title"><b>违章单</b><span class="text-primary pull-right">已归档</span></h4>
                                <p class="text-muted">2015-11-01 12:45</p>
                            </div>
                        </div>
                        <div class="card-box-content">
                            <div class="offences-box-3">
                                    <div class="member-info">
                                        <h4 class="m-t-0 m-b-5 header-title"><b>周星星</b></h4>
                                    </div>

                                    <div class="row clearfix">
                                        <div class="fk-item col-xs-4">
                                            <p class="first">0.00</p>
                                            <p class="text-muted">罚款金额</p>
                                        </div>
                                        <div class="fk-item col-xs-4"  style="border-left: 1px dashed #ccc;border-right: 1px dashed #ccc;">
                                            <p class="first">20.00</p>
                                            <p class="text-muted">处罚分数</p>
                                        </div>
                                        <div class="fk-item col-xs-4">
                                            <p class="first">0.00</p>
                                            <p class="text-muted">其他罚款</p>
                                        </div>
                                    </div>

                                    <div class="wftl">
                                        <h6>违反条例</h6>
                                        <p>
                                            员工日常奖罚体系：全体员工（除总经理外）每天填写当天工作日志和第二工作日的计划，（违章范围：漏填（日志或计划）、未如实填写工作内容，包括所有加班、值班都需要填写工作日志\计划；除临时加班（下班之后决定加班的）情况不需要填写计划外,计划内加班的是需要填写计划的。）
                                        </p>
                                    </div>
                                    <div class="cljg">
                                        <h6>处理结果</h6>
                                        <p>
                                            由于您没有填写2017-02-05 的工作日志（RZ1701271972），因此扣基本绩效分20分。） 冲销原因：常委开会到很晚，故冲销
                                        </p>
                                    </div>
                            </div>     
                        </div>
                                
                        <div class="card-box-foot clearfix m-t-5">
                            <div class="pull-left">
                                <div class="checkbox checkbox-primary m-l-0">
                                    <input id="checkbox5" type="checkbox" class="checkbox_item">
                                    <label for="checkbox5">
                                        &nbsp;
                                    </label>
                                </div>
                            </div>
                            <div class="pull-right">
                                <button class="btn btn-danger remove" style="width: 80px;">删除</button>
                            </div>
                            
                        </div>
                    </div>
                </div>
            {{/each}}
        </script>
        <!-- end 不用前端渲染可删除 -->

        <!-- common js  -->
        <script src="assets/js/jquery.min.js"></script>
        <script src="assets/js/bootstrap.min.js"></script>
        <!-- jQueryPlugin js -->
        <script src="assets/js/imagesLoaded.js"></script>
        <script src="assets/js/masonry.pkgd.min.js"></script>
        <!-- 不用前端渲染可删除 -->
        <script src="assets/js/template.js"></script>
        <!-- end 不用前端渲染可删除 -->
        <!-- page js -->
        <script src="assets/pages/masonryOnScroll.js"></script>

        <script>
            $(function(){
         
                var ajax_list = {};
                    ajax_list.page_index =0;
                    ajax_list.api = 'page2.aspx';//api
                var lock = false;//加载锁
                var first_init = true;//初始化使用一次

                // 初始化瀑布流
                var $masonry = $('#masonry');
                //浏览器支持检测
                // if (Modernizr.smil) {
                //     var masonry_opt = {itemSelector: '.item',columnWidth: '.item'}; //现代浏览器
                // } else {
                    var masonry_opt = {itemSelector: '.item',columnWidth: '.item',gutter: 0};//IE10以下
                //}
                function addItems() {
                    // $.post(ajax_list.api,{page:ajax_list.page_index},function(data){

                    // 上锁了就退出
                    if(lock)return;

                    lock = true;
                    $.showScrollLoading();

                    setTimeout(function(){ //ajax 成功回掉
                        //模拟数据
                        var data = {list:[{},{},{},{},{}],msg:1};
                        var $newDom;
                        //没有返回数据的情况
                        if(!data){
                            $.hideScrollLoading();
                            $('body').append('<div style="width:150px;height:30px;line-height:30px;font-size:16px;text-align:center;margin:10px auto 30px;color:#eee;">没有更多了</div>');
                            return;
                        }

                        var html = template('template_item',data);
                        
                        $newDom = $($.parseHTML(html)).appendTo($masonry);
                    
                        // $newDom.imagesLoaded(function() {
                            $masonry.masonry( 'appended', $newDom,true);
                        // });
                    
                        

                        ajax_list.page_index++;//页数加1
                        lock = false;
                        $.hideScrollLoading();

                        //页面初始化执行一次
                        if (first_init) {
                            $masonry.imagesLoaded(function() {
                                $masonry.masonry(masonry_opt);
                            });

                            $masonry.masonryOnScroll({callback:function(){
                                addItems();
                            }});
                            first_init = !first_init;
                        }

                    },3000)
                    
                    // });
                }
                addItems();//初始化
              //工具栏
                //全选
                $("#checkboxall").click(function(){   
                    if(this.checked){   
                        $("#masonry :checkbox").prop("checked", true);
                    }else{   
                        $("#masonry :checkbox").prop("checked", false);
                    }   
                });
                $("#masonry").on('click',":checkbox",function(){
                    var $that = $(this);
                    if(!$that.attr('checked')){
                        $("#checkboxall").prop("checked", false);
                    }
                })
                //全选删除
                $("#checked_remove").click(function(){
                    var data=[];
                    $("#masonry :checkbox").each(function(){
                        var that=this;
                        if($(that).prop("checked")){
                            data.push(that.id)
                        }
                    });
                    alert(data)
                    if (data.length==0) {
                        alert("您还未选中任意一项！")
                    }
                })
                //单个删除
                $('#masonry').on('click','.remove',function(e){
                    e.preventDefault();
                    var that=$(this).parent().parent().find('.checkbox_item');
                    console.log(that.attr('id'))
                })



                //刷新
                $('.refresh').click(function(){
                    $masonry.empty();
                    $masonry.masonry('destroy');
                    first_init = true;
                    addItems();

                })

            });
        </script>
    </body>
</html>